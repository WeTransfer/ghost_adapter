#!/bin/bash

test_version() {
  echo
  echo "----------------------------------------------------------------------------------------------------------------------"
  echo -e "\033[1;34mTesting against ActiveRecord ${1}\033[0m"

  local gemfile="gemfiles/activerecord-${1}.Gemfile"
  shift

  bundle install --gemfile "${gemfile}" --quiet
  bundle exec --gemfile "${gemfile}" rspec  "$@"
}

test_version "5.0"
test_version "5.1"
test_version "5.2"
test_version "6.0"
test_version "6.1"
